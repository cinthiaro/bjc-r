<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">

		
		<script type="text/javascript" src="/bjc-r/llab/loader.js"></script>
		<title>Unit 7 Lab 1: Trees in a Forest, Page 2</title>
	</head>

	<body>
		<h2>El caso base</h2>	
        <div class="todo">
            <p>PG: Change. I also really dispute leading people down the garden path. This is a common error, but we should not mandate it. If we're going to be didactic, we should not didact in the wrong direction.</p>
            <p>I agree with Paul. This is not good pedagogy. I'd be find to have Alpha, Betsy, and Gamal run into and discuss this bug, but it's not ok to handhold kids into doing the wrong thing. --MF, 4/3/19</p>
        </div>
        
        <div class="sidenote">Un script que se contiene a s&iacute; mismo es <em>recursivo</em> .</div>
        <p>
            Parec&iacute;a tener sentido reemplazar todos los scripts de &aacute;rboles numerados por un &uacute;nico script recursivo con la misma estructura:<br>
            <img src="/bjc-r/img/7-recursion/tree-2-script.png" alt="tree2 size:(size#){move(size) steps; turn counterclockwise (25) degrees; tree 1 size:(size*0.65); turn clockwise(25) degrees; turn clockwise(35) degrees; tree 1 size:(size*0.85); turn counterclockwise (35); move(-1*size) steps}" title="tree2 size:(size#){move(size) steps; turn counterclockwise (25) degrees; tree 1 size:(size*0.65); turn clockwise(25) degrees; turn clockwise(35) degrees; tree 1 size:(size*0.85); turn counterclockwise (35); move(-1*size) steps}" height="267">&nbsp; 
            <img src="/bjc-r/img/7-recursion/tree-3-script.png" alt="tree 3 size:(size#){move(size) steps; turn counterclockwise (25) degrees; tree 2 size:(size*0.65); turn clockwise(25) degrees; turn clockwise(35) degrees; tree 2 size:(size*0.85); turn counterclockwise (35); move(-1*size) steps}" title="tree 3 size:(size#){move(size) steps; turn counterclockwise (25) degrees; tree 2 size:(size*0.65); turn clockwise(25) degrees; turn clockwise(35) degrees; tree 2 size:(size*0.85); turn counterclockwise (35); move(-1*size) steps}" height="267">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ... &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <img src="/bjc-r/img/7-recursion/recursiveTree-wo-base.png" alt="tree level:(level#) size:(size#){move(size) steps; turn counterclockwise (25) degrees; tree level:(level-1) size:(size*0.65); turn clockwise(25) degrees; turn clockwise(35) degrees; tree level:(level-1) size:(size*0.85); turn counterclockwise (35); move(-1*size) steps}" title="tree level:(level#) size:(size#){move(size) steps; turn counterclockwise (25) degrees; tree level:(level-1) size:(size*0.65); turn clockwise(25) degrees; turn clockwise(35) degrees; tree level:(level-1) size:(size*0.85); turn counterclockwise (35); move(-1*size) steps}" height="267">
        </p>
        <!-- 	<p>We first tried to build the recursive tree by using the same script as for <code>tree2</code>, <code>tree3</code>, etc. and replacing the call to a lower-level tree with a call to <code>tree</code> itself but with a lower level input, like this:<br />
        <img class="indent" src="/bjc-r/img/6-recursion/tree-recursive-call.png" alt="tree level: (level - 1) size: (size × 0.65)" title="tree level: (level - 1) size: (size × 0.65)" />
        </p>    -->
        <p>
            Pero no funcion&oacute;:<br>
            <!--<img class="indent" src="/bjc-r/img/6-recursion/tree-nobase.png" alt="buggy tree block definition" title="buggy tree block definition" />  -->
            <img class="indent" src="/bjc-r/img/7-recursion/treebug.gif" alt="Tree drawing never terminates, stuck at a single branch" title="Tree drawing never terminates, stuck at a single branch">
        </p>
        <div class="dialogue">
        	<div>
                <span>Betsy:</span>  <strong>&iexcl;Aaarghhh! &iquest;Qu&eacute; es lo que est&aacute; mal?</strong> 
            </div>
        	<div>
                <span>Alphie:</span>&iexcl;Nunca se para! 
            </div>
        	<div>
                <span>Gamal:</span> Despu&eacute;s de que gira a la izquierda, deber&iacute;a hacer un &aacute;rbol m&aacute;s peque&ntilde;o, pero entonces se <em>supone</em> que debe terminar y girar a la derecha y hacer un &aacute;rbol all&iacute; tambi&eacute;n. 
			</div>
        	<div>
                <span>Betsy:</span> &iexcl;Claro, Gamal! &iexcl;No va bien!</div>
        	<div>
                <span>Gamal:</span> S&iacute;, en cada recursiva llama a <code>&aacute;rbol</code>, el sprite dibuja ramas izquierdas cada vez m&aacute;s peque&ntilde;as hasta que parece estar girando en un solo lugar. Nunca dibuja una rama derecha para terminar el &aacute;rbol en el que est&aacute; trabajando.
			</div>
        	<div>
                <span>Alphie:</span> Lo entiendo. Los bloques originales numerados <span style="font-family: monospace;">&aacute;rbol</span><code> 1</code>, <code>&aacute;rbol 2</code>, etc. <em>no son</em> todos los mismos. El primero, <code>&aacute;rbol 1</code>, es diferente; s&oacute;lo dibuja una l&iacute;nea, <em>no ramas</em>, y pone al sprite de nuevo donde empez&oacute;.
                <p> 
                	<em>Alphie apunta al c&oacute;digo del <span style="font-family: monospace;">&aacute;rbol</span><code>1</code> y a la figura que dibuja.</em><br>
                	<img class="indent" src="/bjc-r/img/7-recursion/tree1.png" alt="tree 1 size:(size#){move(size) steps; move(-1*size) steps}" title="tree 1 size:(size#){move(size) steps; move(-1*size) steps}">
                    <img class="indent" src="/bjc-r/img/7-recursion/tree-level1.png" alt="tree1 result: Trunk of tree drawn" title="tree1 result: Trunk of tree drawn">
                </p>
            </div>
        	<div>
                <span>Betsy:</span> <strong>As&iacute; que nuestro bloque de <code>&aacute;rbol</code> recursivo tiene que hacer algo <em>diferent</em>e cuando est&aacute; en <var>nivel = 1</var></strong>
            </div>
        	<div>
                <span>Gamal:</span> !S&iacute;! Tiene que dibujar s&oacute;lo una l&iacute;nea sin a&ntilde;adir otra rama.
            </div>

			<div class="takeNote">Esta versi&oacute;n diferente para el nivel m&aacute;s bajo de un script recursivo se llama el <strong>caso base</strong>.</div>

            <div>
                <span>Betsy:</span> Pensemos a trav&eacute;s de un simple &aacute;rbol para averiguar c&oacute;mo este "caso base" necesita funcionar. Veamos el <code>&aacute;rbol 3</code> con tama&ntilde;o 40.<br>
                <img src="/bjc-r/img/7-recursion/tree-3-script.png" alt="tree 3 size:(size#){move(size) steps; turn counterclockwise (25) degrees; tree 2 size:(size*0.65); turn clockwise(25) degrees; turn clockwise(35) degrees; tree 2 size:(size*0.85); turn counterclockwise (35); move(-1*size) steps}" title="tree 3 size:(size#){move(size) steps; turn counterclockwise (25) degrees; tree 2 size:(size*0.65); turn clockwise(25) degrees; turn clockwise(35) degrees; tree 2 size:(size*0.85); turn counterclockwise (35); move(-1*size) steps}">
                <img class="indent" src="/bjc-r/img/7-recursion/tree3-call.png" alt="clear; point in direction (0); pen down; tree 3 size:(40)" title="clear; point in direction (0); pen down; tree 3 size:(40)">
            </div>
            <div><span>Alphie:</span> Est&aacute; bien,despu&eacute;s de despejar el escenario, apuntando hacia arriba y dejando el bol&iacute;grafo, el sprite se mover&aacute; 40 pasos y luego girar&aacute; 25&deg; a la izquierda. Y entonces llamar&aacute; a <span style="font-family: monospace;">&aacute;rbol</span><code> 2</code> con un tama&ntilde;o m&aacute;s peque&ntilde;o.</div>
            <div><span>Betsy:</span> Bien. Y <code>&aacute;rbol 2</code>, que es casi el mismo, se mover&aacute;, girar&aacute;, y luego llamar&aacute; a <span style="font-family: monospace;">&aacute;rbol</span><code> 1</code>, el cual <em>s&oacute;lo dibuja una l&iacute;nea y regresa</em>. Despu&eacute;s, <span style="font-family: monospace;">&aacute;rbol</span><code> 2</code> le dice al sprite que gire 60&deg; a la derecha y dibuja otro peque&ntilde;o <code>&aacute;rbol 1 </code>y.... </div>
            <div> <span>Gamal:</span> S&iacute;, y ya que <code>&aacute;rbol 1</code> finaliza, &iexcl;<em>eso deja a <code>&aacute;rbol 2</code> finalizar!</em> Entonces, se ver&aacute; as&iacute; cuando <code>&aacute;rbol 2</code> finalice:</div>
            <div class="stagedir"><img src="/bjc-r/img/7-recursion/tree3-drawing-partial.jpg" alt="drawing of tree 3 after the first tree 2 is called" title="drawing of tree 3 after the first tree 2 is called" height="100"></div>
            <div><span>Alphie:</span> S&iacute;. y luego el script <code>tree 3</code>&nbsp; gira 60&deg; a la derecha y utiliza todo el script de <code>&aacute;rbol 2</code> de nuevo para crear el otro lado. Luego retroceder&aacute; 35&deg; y se mover&aacute; hacia atr&aacute;s hasta el principio.</div>
            <div class="stagedir"><img src="/bjc-r/img/7-recursion/tree3-drawing-complete.jpg" alt="drawing of tree3 after the second tree 2 is called" title="drawing of tree 3 after the second tree 2 is called"></div>
            <div><span>Betsy:</span> As&iacute; es como termina el <span style="font-family: monospace;">&aacute;rbol</span><code> 3</code>. Ahora, acerca de ese "caso base" para el script de <code>&aacute;rbol</code> recursivo ... El caso base es el nivel m&aacute;s bajo de la recursividad, as&iacute; que es como el <code>&aacute;rbol 1</code>. </div>
            <div><span>Alphie:</span> S&iacute;, el <code>&aacute;rbol 1</code> s&oacute;lo dibuja una l&iacute;nea y no intenta hacer otro &aacute;rbol.</div>
            <div><span>Betsy:</span> As&iacute; que necesitamos que nuestro bloque de&nbsp; <code>&aacute;rbol </code><em>recursivo</em> dibuje una l&iacute;nea en el nivel 1 en vez de hacer m&aacute;s &aacute;rboles peque&ntilde;os para siempre.</div>
		</div>

		<div class="forYouToDo" id="first">
            <ol>
                <li>
                    Corrige tu bloque de <code>&aacute;rbol</code> recursivo de modo que incluya un caso base que detenga el script de llamarse as&iacute; mismo para siempre. Aqu&iacute; hay dos formas en las cu&aacute;les puedes hacerlo, y hay m&aacute;s. Utiliza la que tenga m&aacute;s sentido para ti.<br>
                <img src="/bjc-r/img/7-recursion/logic-inside-recursive-tree-v1.png" alt="if(level=1){move(size) steps; move(-1*size) steps}else{...Build more branches...}" title="if(level=1){move(size) steps; move(-1*size) steps}else{...Build more branches...}" height="363" width="405">  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <img src="/bjc-r/img/7-recursion/logic-inside-recursive-tree-v2.png" alt="move(size) steps; if(level&gt;1){...Build more branches...}; move(-1*size) steps" title="move(size) steps; if(level&gt;1){...Build more branches...}; move(-1*size) steps" height="339" width="405"></li>
                <li>
                	Ejecuta el <code>&aacute;rbol nivel: 9 tama&ntilde;o: 50</code>. Si ahora funciona correctamente, deber&iacute;as obtener un resultado como este:<br>
					<img class="indent" src="/bjc-r/img/7-recursion/tree-level9.jpg" alt="Tree with trunk and 8 levels of branches" title="Tree with trunk and 8 levels of branches">
                </li>
                <li>El tiempo que se tarda en dibujar el &aacute;rbol aumenta <em>muy </em>r&aacute;pidamente con el n&uacute;mero de niveles, as&iacute; que no recomendamos probar 20 niveles. Pero intenta cronometrar desde el nivel 8 hasta el 12.</li>
			</ol>
		</div>

        <div class="takeItFurther">
            <ol type="A">
            	<li><strong>Analiza:</strong> <code>&aacute;rbol 1</code>&nbsp; produce s&oacute;lo un palo. &iquest;Cu&aacute;ntos <em>nuevos</em> palos (ramas) son producidos por el <code>&aacute;rbol 2</code>? Luego, cu&aacute;ntos <em>nuevos</em> son producidos por el <code>&aacute;rbol 3</code>?  &iquest;y por el <code>&aacute;rbol 4</code>? Averigua cu&aacute;ntas ramitas nuevas se a&ntilde;aden en el nivel 10. Ahora puedes ver por qu&eacute; llevar&iacute;a mucho tiempo dibujar el nivel 20.</li>
            </ol>
        </div>
        
        <div class="takeNote">
        	<img class="imageRight" src="/bjc-r/img/icons/take-turns-speaking-mini.gif" alt="Take turns speaking" title="Take turns speaking">
            <p>Los Scripts <em>recursivos</em> se llaman a s&iacute; mismos. Para que se detengan, debe haber alg&uacute;n caso especial en el que <em>no </em>se llamen as&iacute; mismos. Lo llamamos el <strong>caso base</strong>, una versi&oacute;n m&aacute;s simple del script que <em>no llama al bloque en s&iacute; mismo</em>.</p>
            <p>Hay usualmente un <em>condicional</em> (como <code>si-no</code>) con dos casos: un <em>caso base</em> para el nivel m&aacute;s bajo que impide que la recursividad contin&uacute;e para siempre y un <strong>caso recursivo</strong> that que llama al script mismo una y otra vez a niveles m&aacute;s bajos hasta que llega al caso base.</p>
            <p>Cuando un script <em>sigue</em> llam&aacute;ndose a s&iacute; mismo para siempre (como cuando el sprite estaba girando en un lugar), es un error, y decimos que el programa est&aacute; atascado en un <strong>bucle infinito</strong>.</p>
        </div>
        
        <div class="forYouToDo">
            <ol start="4">
      <!--          <li><img class="inline" src="/bjc-r/img/icons/talk-with-your-partner.png" alt="Talk with Your Partner" title="Talk with Your Partner" />Look at your corrected recursive <code>tree</code> script. Identify the <em>base case</em> and the <em>recursive case</em>, and discuss how recursion works in this script. </li>    -->
                <li>
                    A&ntilde;ade una variable de <var>conteo</var> global, incrementada en primer lugar en el bloque del <code>&aacute;rbol</code>, para registrar el n&uacute;mero de veses que ese <code>&aacute;rbol</code> es llamado cuando se ejecuta en diferentes niveles.&nbsp; Haz una tabla. &iquest;Qu&eacute; patr&oacute;n encuentras?
                    

<table class="center bordered" summary="table showing the number of times that TREE runs (this number is labeled 'count') for a TREE of a given level">
                        <tbody>
<tr>
                            <th scope="col" style="font-weight:normal;"><var>nivel</var></th>
                            <th scope="col" style="font-weight:normal;"><var>conteo</var></th>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>3</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>7</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>?</td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>&nbsp;</td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td>&nbsp;</td>
                        </tr>
                        <tr>
                            <td>etc.</td>
                            <td>etc.</td>
                        </tr>
                    </tbody></table>
                </li>
                <div class="endnote">Este es un ejemplo de crecimiento exponencial.&nbsp; Este tipo de crecimiento para un algoritmo toma <em>tiempo irrazonable</em> como lo viste en <a href="/bjc-r/cur/programming/5-algorithms/old/3-timing-experiments/3-classifying-algorithms.html?topic=nyc_bjc%2F5-algorithms.topic&amp;course=bjc4nyc.html&amp;novideo&amp;noassignment" title="Classifying Algorithms">Unidad 5 Laboratorio 3: Clasificando algoritmos</a>. Por eso sugerimos <em>no probar</em> 20 niveles. </div>
            </ol>
        </div>
        

	
</body></html>